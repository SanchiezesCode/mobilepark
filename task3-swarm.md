Тестовое задание по docker compose в docker swarm

Задача

Необходимо подготовить docker compose файл для описания стека в docker swarm с сервисом который в себя включает docker контейнер с образом ubuntu:22.04. Необходимо реализовать связь с сервисом базы данных postgresql и redis. У них есть сети:

• db-postgres-net
• ds-redis-net
После чего необходимо подключить к терминалу внутри контейнера в интерактивном режиме, установить туда необходимы пакеты и продемонстрировать возможность подключения к postgresql и redis.

Требование к сервису

• Не менее 2х реплик
• Контейнер должен работать постоянно, можно добавить команду sleep infinity
• Возможность бесшовного обновления (rolling update)
• Должна быть возможность просмотра логов на хост сервере (вынести volume)
• Лимит по ресурсам 1 ядро, 500мб оперативной памяти
• Лимит по логам 1 файл, 5 мегабайт
• Запущен на серверах с лейблом SERVERTYPE = worker
• Внутри контейнера есть переменная окружения HOSTNAME, с именем ноды на которой запущен контейнер
 